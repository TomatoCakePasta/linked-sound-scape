<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Vuetify 3</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>
  
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>

    <script>
      let sound;

      function preload() {
          sound = loadSound("./bass.wav");
      }

      function setup() {
          canvas = createCanvas(800, 800);
          canvas.mousePressed(onClickPlay);
      }

      function draw() {
      }

      // 呼び出すと雷が生成される関数
      function drawLightning() {
        console.log("Light");
        stroke(255);
        strokeWeight(4);
        noFill();
        for (let i = 0; i < 7; i++) {
          beginShape();
          
          let x = width / 2;
          let y = 0;
          
          // 雷のランダムな動きをシミュレート
          for (let i = 0; i < 40; i++) {
            x += random(-20, 20);
            y += random(40, 80);
            vertex(x, y);
          }
          
          vertex(x, height);
          endShape();
        }
        
        // 1秒後に雷を消す
        setTimeout(() => {
          lightning = false;
          background(0);
        }, 100);
      }

      // webSocketで呼び出したい
      const onClickPlay = function() {
          sound.play();
          console.log("play");
          // アニメーション再生したり
      }
    </script>
  </body>
</html>
